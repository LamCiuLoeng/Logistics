{% extends "master.html" %}

{% block extCSS %}
<style type="text/css">

</style>
{% endblock %}

{% block extJS %}
<script src="{{url_for('static', filename='js/customer/order_add.js')}}" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
//<![CDATA[
	$(document).ready(function(){
		$(".order_add_info_tab_div").tabs();
		
		
		$(".compute").each(function(){
			var t = $(this);
			t.change(compute);
		});
		
		
		$("#source_company").autocomplete({
			source: function( request, response ) {
				$.ajax({
					url: "{{url_for('bpRoot.view', action = 'ajax_master')}}",
					dataType: "json",
					data: {
						m : 'customer',
						name : $("#source_company").val() 
					},
					success: function( r ) {
						if(r.code == 0){
							response( $.map( r.data, function( item ) {
								return {
									label: item.name,
									value: item.name
								}
							}));
						}else{
							
						}
					}
				});
			},
			minLength: 1			
		});
		
	});

	
	
	
	function compute(){
		var qty = $("#qty").val();
		var qty_ratio = $("#qty_ratio").val();
		var vol = $("#vol").val();
		var vol_ratio = $("#vol_ratio").val();
		var weight = $("#weight").val();
		var weight_ratio = $("#weight_ratio").val();
		var amount = qty * qty_ratio + vol * vol_ratio + weight * weight_ratio;
		$("#amount").val(amount);
	}
	
//]]>
</script>

{% endblock %}

{% block inner_menu %}
<div class="inner_menu">
	<ul>
    	<li><img src="/static/images/system/order_manage_25.jpg" width="71" height="21" id="Image1" onmouseover="MM_swapImage('Image1','','/static/images/system/order_manage_h_25.jpg',1)" onmouseout="MM_swapImgRestore()" onclick="redirect('{{url_for('.view')}}')"/></li>
        
        <li><input type="image" src="/static/images/system/order_manage_33.jpg" width="77" height="21" id="Image3" onmouseover="MM_swapImage('Image3','','/static/images/system/order_manage_h_33.jpg',1)" onmouseout="MM_swapImgRestore()" onclick="tosave()"/></li>
        <!-- 
        <li><img src="/static/images/system/order_manage_35.jpg" width="94" height="21" id="Image4" onmouseover="MM_swapImage('Image4','','/static/images/system/order_manage_h_35.jpg',1)" onmouseout="MM_swapImgRestore()" /></li>
        <li><img src="/static/images/system/order_manage_37.jpg" width="77" height="21" id="Image5" onmouseover="MM_swapImage('Image5','','/static/images/system/order_manage_h_37.jpg',1)" onmouseout="MM_swapImgRestore()" /></li>
        <li><img src="/static/images/system/order_manage_39.jpg" width="101" height="21" id="Image6" onmouseover="MM_swapImage('Image6','','/static/images/system/order_manage_h_39.jpg',1)" onmouseout="MM_swapImgRestore()" /></li>
        <li><img src="/static/images/system/order_manage_41.jpg" width="101" height="21" id="Image7" onmouseover="MM_swapImage('Image7','','/static/images/system/order_manage_h_41.jpg',1)" onmouseout="MM_swapImgRestore()" /></li>
        -->
        <li style="padding:0px; margin:0px 55px 0px 0px; float:right"><a href="{{url_for('bpAuth.logout')}}"><img src="/static/images/system/order_manage_22.jpg" width="56" height="29" /></a></li>
    </ul>
</div>
{% endblock %}

{% block content %}


<form action="{{url_for('.view', action = 'save_new')}}" method="post">
<div class="order_add_div">
  <div class="order_add_div_header">{{_('Now Order')}}</div>
    <div class="order_add_div_body">
  <ul>
    	<li style="width:180px;"><span><sup class="warn">*</sup>&nbsp;{{_('Source Station')}}</span>
    	  <input name="source_station" id="source_station" type="text" style="width:100px" class="must_input"/>
    	</li>
    	
    	
        <!-- 
        <li style="width:180px;"><span>业务员</span>
          <input name="input" type="text" style="width:100px"/>
        </li>
        <li style="width:180px;"><span>时效</span>
          <input name="input3" type="text" style="width:100px"/></li>
         -->
        <!-- 
    	  <li style="width:180px;"><span>单据前缀</span>
    	    <input name="input8" type="text" style="width:100px"/>
    	  </li>
        -->
        
        
    	 <li style="width:180px;"><span><sup class="warn">*</sup>&nbsp;单号</span>
    	    <input name="ref_no" id="ref_no" type="text" class="numeric must_input" style="width:100px"/>
  	    </li>
    	  <li style="width:366px;"><span><sup class="warn">*</sup>&nbsp;{{_('Destination Station')}}</span>
    	    <input name="destination_station" id="destination_station" type="text" style="width:160px" class="must_input"/>
    	    <!-- <input name="input10" type="text" style="width:120px"/> -->      
   	      </li>
   	      <!-- 
    	  <li style="width:180px;"><span>服务产品</span>
    	    <input name="input6" type="text" style="width:100px"/>
  	    </li>
    	  <li style="width:180px;"><span>单据序号</span>
    	    <input name="input7" type="text" style="width:100px"/>
  	    </li>
   	       -->
    	  <li style="width:180px;"><span>{{_('Create Time')}}</span>{{current}}</li>
    	  <li style="width:459px;"><span><sup class="warn">*</sup>&nbsp;{{_('Source Company')}}</span>
    	    <input name="source_company" id="source_company" type="text" style="width:360px" class="must_input"/>
    	  </li>
    	  <li style="width:459px;"><span><sup class="warn">*</sup>&nbsp;{{_('Destination Company')}}</span>
    	    <input name="destination_company" id="destination_company" type="text" style="width:360px" class="must_input"/>
    	  </li>
    	  <li style="width:459px;"><span><sup class="warn">*</sup>&nbsp;{{_('Source Contact')}}</span>
    	    <input name="source_contact" id="source_contact" type="text" style="width:360px" class="must_input"/>
    	  </li>
    	  <li style="width:459px;"><span><sup class="warn">*</sup>&nbsp;{{_('Destination Contact')}}</span>
    	    <input name="destination_contact" id="destination_contact" type="text" style="width:360px" class="must_input"/>
    	  </li>
    	  <li style="width:459px;"><span>{{_('Source Address')}}</span>
    	    <input name="source_address" id="source_address" type="text" style="width:360px"/>
    	  </li>
    	  <li style="width:459px;"><span>{{_('Destination Address')}}</span>
    	    <input name="destination_address" id="destination_address" type="text" style="width:360px"/>
    	  </li>
    	  <li style="width:227px;"><span>{{_('Source Phone')}}</span>
    	    <input name="source_tel" id="source_tel" type="text" style="width:140px"/>
  	    </li>
    	  <li style="width:226px;"><span>{{_('Source Mobile')}}</span>
    	    <input name="source_mobile" id="source_mobile" type="text" style="width:140px"/>
  	    </li>
        <li style="width:227px;"><span>{{_('Destination Phone')}}</span>
    	    <input name="destination_tel" id="destination_tel" type="text" style="width:140px"/>
  	    </li>
    	  <li style="width:226px;"><span>{{_('Destination Mobile')}}</span>
    	    <input name="destination_mobile" id="destination_mobile" type="text" style="width:140px"/>
  	    </li>
    	  <li style="width:459px;"><span>{{_('Pickup Type')}}</span>
    	  	<select name="pickup_type_id" id="pickup_type_id">
    	  		{% for p in pickup_type %}
    	  			<option value="{{p.id}}">{{p}}</option>
    	  		{% endfor %}
    	    </select>
  	    </li>
    	  <li style="width:227px;"><span>{{_('Package Type')}}</span>
    	    <select name="pickup_type_id" id="pickup_type_id">
    	  		{% for p in pack_type%}
    	  			<option value="{{p.id}}">{{p}}</option>
    	  		{% endfor %}
    	    </select>
  	    </li>
  	    <li style="width:226px;"><span>{{_('Expect Time')}}</span>
    	    <input type="text" style="width:140px" id="expect_time" name="expect_time" class="datepicker"/>
  	    </li>
  	    
    	  <li style="width:459px;"><span>{{_('Item')}}</span>
    	    <input name="item" id="item" type="text" style="width:360px"/>
  	    </li>
    	  <li style="width:925px;"><span>{{_('Item Remark')}}</span>
    	    <input name="item_remark" id="item_remark" type="text" style="width:840px"/>
  	    </li>
    	  <li style="width:925px;"><span>{{_('Remark')}}</span>
    	  	<textarea name="remark" id="remark" style="width:840px">深圳深福合力物流 服务热线：400-888-0900</textarea>
    	    
  	    </li>
      </ul><table width="100%" border="0" cellspacing="0" cellpadding="0" style="float:left;">
  <tr>
    <td width="9%" align="center">{{_('Qty')}}</td>
    <td width="9%" align="center">{{_('Qty Ratio')}}</td>
    <td width="9%" align="center">{{_('Weight')}}</td>
    <td width="9%" align="center">{{_('Weight Ratio')}}</td>
    <td width="9%" align="center">{{_('Vol')}}</td>
    <td width="9%" align="center">{{_('Vol Ratio')}}</td>
    <td width="9%" align="center"><sup class="warn">*</sup>&nbsp;{{_('Amount')}}</td>
    <td width="9%" align="center">{{_('Payment')}}</td>
    </tr>
  <tr>
    <td height="30" align="center"><span style="width:180px;">
      <input name="qty" id="qty" type="text" class="order_add_div_body_input numeric compute" style="width:70px"/>
    </span></td>
    <td align="center"><span style="width:180px;">
      <input name="qty_ratio" id="qty_ratio" type="text" class="order_add_div_body_input numeric compute" style="width:70px" value="{{ratios.get('QTY',0)}}"/>
    </span></td>
    <td align="center"><span style="width:180px;">
      <input name="vol" id="vol" type="text" class="order_add_div_body_input numeric compute" style="width:70px"/>
    </span></td>
    <td align="center"><span style="width:180px;">
      <input name="vol_ratio" id="vol_ratio" type="text" class="order_add_div_body_input numeric compute" style="width:70px" value="{{ratios.get('VOL',0)}}"/>
    </span></td>
    <td align="center"><span style="width:180px;">
      <input name="weight" id="weight" type="text" class="order_add_div_body_input numeric compute" style="width:70px"/>
    </span></td>
    <td align="center"><span style="width:180px;">
      <input name="weight_ratio" id="weight_ratio" type="text" class="order_add_div_body_input numeric compute" style="width:70px" value="{{ratios.get('WEIGHT',0)}}"/>
    </span></td>
    <td align="center"><span style="width:180px;">
      <input name="amount" id="amount" type="text" class="order_add_div_body_input numeric must_input" style="width:70px"/>
    </span></td>
    <td align="center">
    	<span style="width:180px;">
	      <select name="payment_id" id="payment_id" class="order_add_div_body_input" style="width:70px">
				{% for p in payment %}
						<option value="{{p.id}}">{{p}}</optino>
				{% endfor %}
			</select>
    	</span>
    </td>
    </tr>
</table>

<div style="clear:both"></div>

<ul>
	<li><p>标记 <sup class="warn">*</sup> 的项为必填项。</p></li>
</ul>

<div style="clear:both"></div>    

<div class="order_add_info_tab_div">
	<div class="order_add_info_tab_header">
		<ul>
			<li><a href="#tabs-1">{{_('Item Details')}}</a></li>
		</ul>
	</div>
	  <div class="order_add_info_tab_body" id="tabs-1">
		<div id="item_details">
			<table border="0" cellpadding="0" cellspacing="0">
				<tr>
				  <td valign="top" align="center">&nbsp;</td>
				  <td valign="top">&nbsp;</td>
				  <td valign="top" align="center">&nbsp;</td>
				  <td valign="top">&nbsp;</td>
				  <td valign="top" align="center">&nbsp;</td>
				  <td valign="top">&nbsp;</td>
				  <td valign="top" align="center">&nbsp;</td>
				  <td valign="top">&nbsp;</td>
				  <td valign="top" align="center">&nbsp;</td>
				  <td valign="top">&nbsp;</td>
			  </tr>
				<tr>
					<td valign="top" width="70px" align="center"><sup class="warn">*</sup>&nbsp;{{_('Item Name')}}</td><td valign="top"><input type="text" name="item_name" id="item_name" value="" class="must_input"></td>
					<td valign="top" width="70px" align="center">{{_('Qty')}}</td><td valign="top"><input type="text" name="item_qty" id="item_qty" value="" class="order_add_div_body_input" style="width:80px;"></td>
					<td valign="top" width="70px" align="center">{{_('Vol')}}</td><td valign="top"><input type="text" name="item_vol" id="item_vol" value="" class="order_add_div_body_input" style="width:80px;"></td>
					<td valign="top" width="70px" align="center">{{_('Weight')}}</td><td valign="top"><input type="text" name="item_weight" id="item_weight" value="" class="order_add_div_body_input" style="width:80px;"></td>
				    <td valign="top" width="70px" align="center">{{_('Remark')}}</td><td valign="top"><textarea name="item_remark" id="item_remark"></textarea></td>
				</tr>
			</table>
		  <p><input type="button" value="{{_('Add')}}" onclick="add_item()"/></p>
		</div>
		<br />
		<table>
			<thead>
				<tr class="field_head">
					<td>{{_('Item Name')}}</td><td>{{_('Qty')}}</td><td>{{_('Vol')}}</td><td>{{_('Weight')}}</td><td>{{_('Remark')}}</td><td>&nbsp;</td>
				</tr>
			</thead>
			<tbody id="item_list">
			</tbody>
		</table>
	  <div style="clear:both"></div>
	</div>
</div>



</form>

{% endblock %}