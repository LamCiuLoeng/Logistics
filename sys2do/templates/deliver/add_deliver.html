{% extends "master.html" %}

{% block extJS %}
<script language="JavaScript" type="text/javascript">
//<![CDATA[
	$(document).ready(function(){
		bind_province_city_district("#destination_province_id","#destination_city_id","");		
	});
//]]>
</script>
{% endblock %}

{% block content %}
	<form method="post" action="{{url_for('.view',action='deliver_save_new')}}">
	<p>
		<input type="submit" value="保存"/>
		<input type="reset" value="重置"/>
		<input type="button" value="取消"/>
	</p>
		<table border="1" cellpadding="3" cellspacing="3">
			<tbody>
				<tr>
					<td>{{_('3rd Party Supplier')}}</td>
					<td>
						<select name="supplier_id" id="supplier_id">
							{% for s in suppliers %}
								<option value="{{s.id}}">{{s}}</option>
							{% endfor %}
							<option value="OTHER">---- {{_('Other')}} ----</option>
						</select>
					</td>
					<tr>
						<td>{{_('Deliver Number')}}</td>
						<td><input type="text" name="no" id="no"/></td>
					</tr>
				</tr>
				<tr>
					<td>{{_('Destination')}}</td>
					<td>
						<select name="destination_province_id" id="destination_province_id">
							<option>{{_('Please Select One')}}</option>
							{% for p in provinces %}
								<option value="{{p.id}}">{{p}}</option>
							{% endfor %}
						</select>
						<select name="destination_city_id" id="destination_city_id"></select>
						<input type="text" name="destination_address" id="destination_address" />
					</td>
				</tr>
				<tr>
					<td>{{_('Supplier Contact')}}</td>
					<td><input type="text" name="supplier_contact" id="supplier_contact" /></td>
				</tr>
				<tr>
					<td>{{_('Supplier Tel')}}</td>
					<td><input type="text" name="supplier_tel" id="supplier_tel" /></td>
				</tr>
				<tr>
					<td>{{_('Expect Time')}}</td>
					<td><input type="text" name="expect_time" id="expect_time" /></td>
				</tr>
				<tr>
					<td>{{_('Charge')}}</td>
					<td><input type="text" name="amount" id="amount" /></td>
				</tr>
				<tr>
					<td>{{_('Remark')}}</td>
					<td><textarea name="remark" id="remark"></textarea></td>
				</tr>
			</tbody>
		</table>
		<br />
		<br />
		
		<table border="1" cellpadding="3" cellspacing="3">
			<thead>
				<tr>
					<td>{{_('Customer')}}</td>
					<td>{{_('Order Number')}}</td>
					<td>{{_('Destination')}}</td>
					<td>{{_('Item')}}</td>
					<td>{{_('Qty')}}</td>
					<td>{{_('Weight')}}</td>
					<td>{{_('Expect Time')}}</td>
					<td>{{_('Destination Contact')}}</td>
					<td>{{_('Destination Tel')}}</td>
					<td>{{_('Remark')}}</td>
					<td>{{_('Create Time')}}</td>
					<td>{{_('Creator')}}</td>
					<td>{{_('Update Time')}}</td>
					<td>{{_('Last Updator')}}</td>
				</tr>
			</thead>
			{% for d in result %}		
				<tr>
					<td>{{d.header.customer}}<input type="hidden" name="detail_{{d.id}}" value="{{d.id}}"/></td>
					<td>{{d.header.no}}</td>
					<td>{{d.destination_provice|ifFalse}}{{d.destination_city|ifFalse}}{{d.destination_district|ifFalse}}{{d.destination_address|ifFalse}}</td>
					<td>{{d.item}}</td>
					<td>{{d.order_qty}}&nbsp;{{d.unit}}</td>
					<td>{{d.weight}}&nbsp;{{d.weight_unit}}</td>
					<td>{{d.expect_time|ifFalse}}</td>
					<td>{{d.destination_contact|ifFalse}}</td>
					<td>{{d.destination_tel|ifFalse}}</td>
					<td>{{d.remark|ifFalse}}</td>
					<td>{{d.update_time|ft}}</td>
					<td>{{d.create_by|ifFalse}}</td>
					<td>{{d.update_time|ft}}</td>
					<td>{{d.update_by|ifFalse}}</td>
				</tr>
			{% endfor %}
		</table>
		<br />	
	</form>
	
{% endblock %}